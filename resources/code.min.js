!function(){var tihash=document.getElementById("tihash");if(null!==tihash){var shareurl="",textfield=document.getElementById("sharetext"),button=document.getElementById("sharebutton");textfield.value=shareurl,button.style.visibility="visible",button.style.opacity=1;var clipcopy=function(){"sharebutton"===document.activeElement.id&&(textfield.onfocus=null),document.selection&&document.selection.empty(),textfield.select();var range=document.createRange(),ws=window.getSelection();range.selectNode(textfield),ws.removeAllRanges(),ws.addRange(range),textfield.setSelectionRange(0,999),null===textfield.onfocus&&(textfield.onfocus=clipcopy);try{navigator&&navigator.clipboard?navigator.clipboard.writeText(textfield.value):document.execCommand("copy"),document.getElementById("check").style.visibility="visible"}catch(err){console.log("Failed to copy.",err)}};button.onclick=function(){button.innerHTML="Loading...",button.onclick=null;var req=new XMLHttpRequest;req.overrideMimeType("application/json"),req.open("GET","sharelink.cgi?hash="+tihash.value,!0),req.onloadend=function(){shareurl="Session expired, try reloading the page",200===this.status?(shareurl=JSON.parse(req.responseText).msg,button.innerHTML="Copy",button.onclick=clipcopy,textfield.onfocus=clipcopy):button.innerHTML="Error",button.style.width="48px",textfield.value=shareurl,textfield.style.visibility="visible",textfield.style.opacity=1,textfield.style.width="306px"},req.send()}}}(),function(){var tiresult=document.getElementById("tiresult");if(null!==tiresult&&0!=tiresult.children.length){var textarea=document.querySelector("#viewsource textarea"),button=document.getElementById("htmlbutton");button.style.display="inline-block";var selectAll=function(){document.selection&&document.selection.empty(),textarea.select();var range=document.createRange(),ws=window.getSelection();range.selectNode(textarea),ws.removeAllRanges(),ws.addRange(range),textarea.setSelectionRange(0,9999999)},showIt=function(){textarea.textContent=tiresult.outerHTML,textarea.onfocus=selectAll,textarea.parentNode.style.display="block",button.innerText="Hide HTML",button.onclick=hideIt},hideIt=function(){textarea.parentNode.style.display="none",textarea.textContent="",button.innerText="Show HTML",button.onclick=showIt};button.onclick=showIt}}(),function(){var input=document.getElementById("fileinput"),preview=document.getElementById("preview"),submission=document.getElementById("submission");if(null!==input){var defaultPreview=preview.src,updatePreview=function(){input.files.length&&(input.files[0].size<=2e7?(preview.src=URL.createObjectURL(input.files[0]),submission.classList.add("ready")):(input.value="",alert("File size too large (max 20MB)!\nTry resizing it with an imaging app first."))),0===input.files.length&&(preview.src=defaultPreview,submission.classList.remove("ready"))};input.addEventListener("change",updatePreview),window.addEventListener("pageshow",updatePreview)}}();